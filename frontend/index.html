<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Professional Game Server Management Dashboard" />
        <meta
            name="keywords"
            content="game server hosting, minecraft server hosting, server management, game panel, minecraft panel, server control panel"
        />
        <meta name="theme-color" content="#1a1a1a" />
        <meta name="msapplication-navbutton-color" content="#1a1a1a" />
        <meta name="apple-mobile-web-app-status-bar-style" content="#1a1a1a" />
        <meta property="og:title" content="FeatherPanel Game Server Dashboard" />
        <meta
            property="og:description"
            content="Professional game server management dashboard for Minecraft and other games"
        />
        <meta property="og:type" content="website" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="FeatherPanel Game Server Dashboard" />

        <link rel="icon" type="image/png" href="https://cdn.mythical.systems/featherpanel/logo.png" />
        <link rel="apple-touch-icon" href="https://cdn.mythical.systems/featherpanel/logo.png" />
        <link rel="shortcut icon" href="https://cdn.mythical.systems/featherpanel/logo.png" />
        <meta
            name="twitter:description"
            content="Professional game server management dashboard for Minecraft and other games"
        />
        <meta author="FeatherPanel" />
        <meta name="robots" content="index, follow" />
        <meta
            http-equiv="Content-Security-Policy"
            content="script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https: ws: wss:;"
        />
        <title>FeatherPanel</title>

        <!-- Custom Scrollbar and Preloader Styles -->
        <style>
            /* Custom Dark Mode Scrollbar */
            ::-webkit-scrollbar {
                width: 12px;
                height: 12px;
            }

            ::-webkit-scrollbar-track {
                background: #0a0a15;
                border-radius: 6px;
            }

            ::-webkit-scrollbar-thumb {
                background: #374151;
                border-radius: 6px;
                border: 2px solid #0a0a15;
                transition: all 0.3s ease;
            }

            ::-webkit-scrollbar-thumb:hover {
                background: #4b5563;
                transform: scale(1.05);
            }

            ::-webkit-scrollbar-corner {
                background: #0a0a15;
            }

            /* Firefox Scrollbar */
            * {
                scrollbar-width: thin;
                scrollbar-color: #374151 #0a0a15;
            }

            /* Preloader Styles - Dark Theme (Default) */
            .preloader {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #020203;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 9999;
                transition: all 0.5s ease-out;
            }

            /* Preloader Light Theme */
            .preloader.light {
                background: #ffffff;
            }

            .preloader.fade-out {
                opacity: 0;
                pointer-events: none;
            }

            .preloader-logo {
                width: 60px;
                height: 60px;
                margin-bottom: 1.5rem;
                position: relative;
                border: 2px solid #374151;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #0a0a15;
                transition: all 0.3s ease;
            }

            /* Light theme logo */
            .preloader.light .preloader-logo {
                border-color: #d1d5db;
                background: #f9fafb;
            }

            .preloader-logo::before {
                content: '';
                position: absolute;
                top: -2px;
                left: -2px;
                width: calc(100% + 4px);
                height: calc(100% + 4px);
                border: 2px solid transparent;
                border-top: 2px solid #ffffff;
                border-radius: 50%;
                animation: logoRotate 1.2s linear infinite;
                transition: all 0.3s ease;
            }

            /* Light theme logo border */
            .preloader.light .preloader-logo::before {
                border-top-color: #1f2937;
            }

            .preloader-logo::after {
                content: 'âš¡';
                font-size: 1.5rem;
                color: #ffffff;
                animation: logoPulse 2s ease-in-out infinite;
                transition: all 0.3s ease;
            }

            /* Light theme logo icon */
            .preloader.light .preloader-logo::after {
                color: #1f2937;
            }

            .preloader-tip {
                font-family: 'Arial', sans-serif;
                font-size: 0.875rem;
                color: #9ca3af;
                text-align: center;
                margin-bottom: 1.5rem;
                max-width: 300px;
                line-height: 1.4;
                padding: 0 1rem;
                transition: all 0.3s ease;
            }

            /* Light theme tip text */
            .preloader.light .preloader-tip {
                color: #6b7280;
            }

            .loading-bar {
                width: 180px;
                height: 2px;
                background: #1f2937;
                border-radius: 1px;
                overflow: hidden;
                position: relative;
                transition: all 0.3s ease;
            }

            /* Light theme loading bar background */
            .preloader.light .loading-bar {
                background: #e5e7eb;
            }

            .loading-progress {
                height: 100%;
                background: #ffffff;
                border-radius: 1px;
                width: 0%;
                animation: loadingProgress 2s ease-in-out infinite;
                position: relative;
                transition: all 0.3s ease;
            }

            /* Light theme loading bar progress */
            .preloader.light .loading-progress {
                background: #1f2937;
            }

            .loading-progress::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
                animation: loadingShine 1.5s ease-in-out infinite;
                transition: all 0.3s ease;
            }

            /* Light theme loading bar shine */
            .preloader.light .loading-progress::after {
                background: linear-gradient(90deg, transparent, rgba(31, 41, 55, 0.4), transparent);
            }

            .server-status {
                display: flex;
                gap: 0.5rem;
                margin-top: 1.5rem;
            }

            .status-indicator {
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: #374151;
                animation: statusPulse 1.5s ease-in-out infinite;
                transition: all 0.3s ease;
            }

            /* Light theme status indicators */
            .preloader.light .status-indicator {
                background: #9ca3af;
            }

            /* Animations */
            @keyframes logoRotate {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            @keyframes logoPulse {
                0%,
                100% {
                    opacity: 1;
                    transform: scale(1);
                }
                50% {
                    opacity: 0.7;
                    transform: scale(1.1);
                }
            }

            @keyframes loadingProgress {
                0% {
                    width: 0%;
                }
                50% {
                    width: 60%;
                }
                100% {
                    width: 100%;
                }
            }

            @keyframes loadingShine {
                0% {
                    transform: translateX(-100%);
                }
                100% {
                    transform: translateX(100%);
                }
            }

            @keyframes statusPulse {
                0%,
                100% {
                    opacity: 0.3;
                    transform: scale(1);
                }
                50% {
                    opacity: 1;
                    transform: scale(1.2);
                }
            }

            /* Hide preloader when app is ready */
            .preloader.hidden {
                display: none;
            }
        </style>

        <!-- FEATHERPANEL_HEADER_PLACEHOLDER_START -->
        <!-- FEATHERPANEL_HEADER_PLACEHOLDER_END -->
    </head>
    <body class="dark">
        <!-- Awesome Preloader -->
        <div class="preloader" id="preloader">
            <div class="preloader-logo"></div>
            <div class="preloader-tip" id="tip-text">Preloading assets...</div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <div class="server-status">
                <div class="status-indicator"></div>
                <div class="status-indicator"></div>
                <div class="status-indicator"></div>
            </div>
        </div>

        <div id="app">
            <!-- FEATHERPANEL_APP_PLACEHOLDER_START -->
            <!-- Your app content will be here -->
            <!-- FEATHERPANEL_APP_PLACEHOLDER_END -->
        </div>

        <script type="module" src="/src/main.ts"></script>

        <!-- Preloader Script -->
        <script>
            // Theme management for preloader - Initialize immediately
            let currentTheme = 'dark';

            // Function to update preloader theme
            function updatePreloaderTheme(theme) {
                const preloader = document.getElementById('preloader');
                if (preloader) {
                    if (theme === 'light') {
                        preloader.classList.add('light');
                        preloader.classList.remove('dark');
                    } else {
                        preloader.classList.remove('light');
                        preloader.classList.add('dark');
                    }
                }
            }

            // Function to get current theme
            function getCurrentTheme() {
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                return savedTheme || (prefersDark ? 'dark' : 'light');
            }

            // Initialize preloader theme immediately
            function initializePreloaderTheme() {
                currentTheme = getCurrentTheme();
                updatePreloaderTheme(currentTheme);
            }

            // Apply theme immediately when script runs
            (function () {
                // Get theme before DOM is ready
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = savedTheme || (prefersDark ? 'dark' : 'light');

                // Apply theme to body immediately
                if (theme === 'light') {
                    document.body.classList.add('light');
                    document.body.classList.remove('dark');
                } else {
                    document.body.classList.add('dark');
                    document.body.classList.remove('light');
                }

                // Store current theme
                currentTheme = theme;

                // Apply theme to preloader if it exists
                const preloader = document.getElementById('preloader');
                if (preloader) {
                    updatePreloaderTheme(theme);
                }
            })();

            // Listen for theme changes
            window.addEventListener('theme-changed', (event) => {
                currentTheme = event.detail.theme;
                updatePreloaderTheme(currentTheme);
            });

            // Listen for system theme changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    // Only auto-update if no manual preference
                    currentTheme = e.matches ? 'dark' : 'light';
                    updatePreloaderTheme(currentTheme);
                }
            });

            // Realistic game engine loading messages
            const loadingMessages = [
                'Preloading assets...',
                'Building caches...',
                'Compiling shaders...',
                'Starting WebGPU...',
                'Prewarming UI...',
                'Initializing renderer...',
                'Loading game data...',
                'Setting up networking...',
                'Preparing server connections...',
                'Optimizing performance...',
                'Loading configuration...',
                'Initializing components...',
                'Preparing dashboard...',
                'Loading server list...',
                'Setting up monitoring...',
                'Preparing database...',
                'Loading user preferences...',
                'Setting up notifications...',
                'Finalizing startup...',
            ];

            // Random gaming tips for after loading
            const gamingTips = [
                'Pro tip: Regular server backups can save you hours of troubleshooting!',
                'Did you know? Server performance improves with regular restarts.',
                'Keep your server plugins updated for better security and performance.',
                'Monitor your server resources to prevent crashes during peak hours.',
                'A good server admin always checks logs before making changes.',
                'Automate routine tasks to focus on what matters most.',
                'Regular maintenance prevents 99% of server issues.',
                'Backup before update, update before backup!',
                'Server optimization is an art, not a science.',
                "The best server is the one you don't have to think about.",
                'Keep your server environment clean and organized.',
                'Document everything - future you will thank past you!',
                "Server security is everyone's responsibility.",
                'Performance monitoring is key to happy players.',
                'A well-configured server is a happy server.',
            ];

            let currentMessageIndex = 0;
            let messageInterval;
            let tipInterval;
            let isPageFullyLoaded = false;
            let pageLoadTime = 0;

            // Function to show loading message
            function showLoadingMessage() {
                const tipElement = document.getElementById('tip-text');
                if (tipElement && currentMessageIndex < loadingMessages.length) {
                    tipElement.textContent = loadingMessages[currentMessageIndex];
                    currentMessageIndex++;
                }
            }

            // Function to show random tip
            function showRandomTip() {
                const tipElement = document.getElementById('tip-text');
                if (tipElement) {
                    const randomTip = gamingTips[Math.floor(Math.random() * gamingTips.length)];
                    tipElement.textContent = randomTip;
                }
            }

            // Function to start showing tips
            function startShowingTips() {
                showRandomTip();
                tipInterval = setInterval(showRandomTip, 3000);
            }

            // Function to hide preloader
            function hidePreloader() {
                const preloader = document.getElementById('preloader');
                if (preloader) {
                    clearInterval(messageInterval);
                    clearInterval(tipInterval);
                    preloader.classList.add('fade-out');
                    setTimeout(() => {
                        preloader.classList.add('hidden');
                    }, 500);
                }
            }

            // Initialize theme when DOM is ready (for any remaining elements)
            document.addEventListener('DOMContentLoaded', () => {
                // Ensure theme is applied to any newly created elements
                updatePreloaderTheme(currentTheme);

                // Start showing loading messages immediately
                showLoadingMessage();
                messageInterval = setInterval(() => {
                    if (currentMessageIndex < loadingMessages.length) {
                        showLoadingMessage();
                    } else {
                        // All messages shown, wait for page load
                        clearInterval(messageInterval);
                    }
                }, 800); // Show message every 800ms

                // Check if Vue app is ready
                const checkAppReady = setInterval(() => {
                    if (document.querySelector('#app').children.length > 0) {
                        clearInterval(checkAppReady);

                        // If page is already loaded, proceed with hiding
                        if (isPageFullyLoaded) {
                            setTimeout(() => {
                                hidePreloader();
                            }, 500);
                        }
                    }
                }, 100);
            });

            // Track page load progress
            window.addEventListener('load', () => {
                pageLoadTime = Date.now();
                isPageFullyLoaded = true;

                // Wait additional 500ms after page load to ensure everything is ready
                setTimeout(() => {
                    if (isPageFullyLoaded) {
                        // Switch to showing tips for a bit before hiding
                        clearInterval(messageInterval);
                        startShowingTips();

                        // Hide after showing a few tips
                        setTimeout(() => {
                            hidePreloader();
                        }, 2000);
                    }
                }, 500);
            });
        </script>

        <!-- FEATHERPANEL_FOOTER_PLACEHOLDER_START -->
        <!-- FEATHERPANEL_FOOTER_PLACEHOLDER_END -->
    </body>
</html>
